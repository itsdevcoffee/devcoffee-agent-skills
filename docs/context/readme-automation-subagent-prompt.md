# Subagent Prompt: Implement README Automation

**Copy this prompt to invoke buzzminson or another implementation agent:**

---

Implement automated README generation and validation for the devcoffee-agent-skills marketplace to ensure consistency across all plugin documentation.

## Context

**Implementation Plan:** `docs/context/readme-automation-implementation.md`
**Research:** `docs/research/2026-02-07-readme-consistency-research.md`

We have 3 plugins (video-analysis, devcoffee, remotion-max) and need to prevent documentation drift as we scale. The plan is based on research of 10+ major repositories (Babel, Nuxt, Rollup, VueUse, Claude Code marketplaces).

## Objective

Create a metadata-driven system where:
- plugin.json files are the single source of truth
- README plugin sections are auto-generated from metadata
- Validation ensures consistency and completeness
- Adding new plugins takes ~30 minutes with guaranteed consistency

## Requirements

### Phase 1: Metadata Standardization (2-3 hours)

**Task 1: Extend plugin.json files**

Add these fields to all 3 plugin manifests:

```json
{
  "tagline": "One-line summary (max 80 chars)",
  "category": "media|code-quality|automation|development",
  "components": {
    "agents": ["agent-name"],
    "commands": ["command-name"],
    "skills": ["skill-name"],
    "hooks": []
  },
  "dependencies": {
    "plugins": ["plugin@marketplace"],
    "external": ["ffmpeg"]
  },
  "installation": {
    "marketplace": "devcoffee-marketplace",
    "setup": [
      "# Mac",
      "brew install ffmpeg",
      "# Linux commands..."
    ]
  },
  "usage": {
    "when": "When to use this plugin",
    "examples": ["/command example"]
  }
}
```

**Update these files:**
- `video-analysis/.claude-plugin/plugin.json`
- `devcoffee/.claude-plugin/plugin.json`
- `remotion-max/.claude-plugin/plugin.json`

**Task 2: Create JSON schema**

**File:** `docs/schemas/plugin-metadata-schema.json`

Create JSON schema that validates:
- Required fields (name, version, description)
- Recommended fields (tagline, category, components, dependencies)
- Field formats (version is semver, name is kebab-case)

**Task 3: Create plugin README template**

**File:** `docs/templates/PLUGIN-README-TEMPLATE.md`

Template with placeholders: {PLUGIN_NAME}, {TAGLINE}, {COMPONENTS_LIST}, etc.

### Phase 2: Automation Scripts (1-2 hours)

**Task 4: Create generation script**

**File:** `scripts/generate-readme-plugins.js`

Requirements:
- Read `.claude-plugin/marketplace.json`
- For each plugin, read its `plugin.json`
- Generate consistent markdown section using this format:

```markdown
### `{name}`
{description}

**Components:**
- **Agent:** {agents list}
- **Command:** {commands list}
- **Skill:** {skills list}

**Installation:**
```bash
/plugin install {name}@{marketplace}
{plugin dependencies}
{external setup commands}
```

**When to use:** {usage.when}

---
```

- Write output to `.readme-plugins-section.md`
- Handle errors gracefully
- Log what was generated

**Task 5: Create validation script**

**File:** `scripts/validate-plugins.js`

Requirements:
- Validate all plugins in marketplace.json
- Check required fields exist
- Check recommended fields (warn if missing)
- Verify README.md exists for each plugin
- Validate version format (semver)
- Validate name format (kebab-case)
- Exit code 1 if errors, 0 if warnings only
- Clear error/warning messages

**Task 6: Add package.json**

**File:** `package.json` (root level)

```json
{
  "name": "devcoffee-agent-skills",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "readme:generate": "node scripts/generate-readme-plugins.js",
    "readme:validate": "node scripts/validate-plugins.js",
    "precommit": "npm run readme:validate"
  }
}
```

### Phase 3: Documentation (1 hour)

**Task 7: Create plugin development guide**

**File:** `docs/guides/PLUGIN-DEVELOPMENT.md`

Contents:
- How to create a new plugin
- Required metadata fields
- README template usage
- Testing locally
- Validation workflow

**Task 8: Update CONTRIBUTING.md**

Add section: "Adding a New Plugin"
- Reference the plugin development guide
- Explain metadata-first approach
- Document validation and generation workflow

**Task 9: Add README markers**

Update `README.md` with generation markers:

```markdown
<!-- BEGIN AUTO-GENERATED PLUGIN SECTIONS -->
<!-- Generated by: npm run readme:generate -->
<!-- Do not edit manually - edit plugin.json files instead -->

## Available Plugins

[Current content stays here for now]

<!-- END AUTO-GENERATED PLUGIN SECTIONS -->
```

## Testing

**Test the automation:**

1. Run validation on current plugins:
   ```bash
   npm run readme:validate
   # Should show warnings for missing recommended fields
   ```

2. Generate plugin sections:
   ```bash
   npm run readme:generate
   # Should create .readme-plugins-section.md
   ```

3. Compare generated output to current README:
   - Should match current format
   - Should include all information
   - Should be consistently formatted

4. Fix any discrepancies in scripts

5. Run full workflow:
   - Update plugin.json with extended metadata
   - Run validation (should pass)
   - Run generation
   - Review output
   - Merge into README

## Success Criteria

- ✅ All 3 plugin.json files have complete extended metadata
- ✅ Generation script produces consistent markdown sections
- ✅ Validation script catches missing required fields
- ✅ Generated sections match current README quality
- ✅ Documentation explains the system clearly
- ✅ npm scripts work (`readme:generate`, `readme:validate`)
- ✅ No information lost from current README

## Implementation Notes

**Don't break existing functionality:**
- Keep all existing plugin.json fields
- Only ADD new fields, don't remove
- Generated sections should match current README

**Make it easy to use:**
- Clear error messages from validation
- Generated output ready to copy/paste
- Documentation explains everything

**Follow the plan:**
- Reference `docs/context/readme-automation-implementation.md`
- Use examples from research docs
- Test thoroughly before merging

## Files to Create/Modify

**Create:**
- `docs/schemas/plugin-metadata-schema.json`
- `docs/templates/PLUGIN-README-TEMPLATE.md`
- `scripts/generate-readme-plugins.js`
- `scripts/validate-plugins.js`
- `package.json` (root)
- `docs/guides/PLUGIN-DEVELOPMENT.md`

**Modify:**
- `video-analysis/.claude-plugin/plugin.json` (add extended fields)
- `devcoffee/.claude-plugin/plugin.json` (add extended fields)
- `remotion-max/.claude-plugin/plugin.json` (add extended fields)
- `README.md` (add generation markers)
- `CONTRIBUTING.md` (add plugin development section)

**Total:** 6 new files, 5 modified files

## Deliverables

1. Working generation script that produces consistent plugin sections
2. Working validation script that catches errors
3. All plugin.json files with complete metadata
4. Documentation explaining the system
5. Updated README with generation markers
6. Test results showing it works

## Reference Documents

- Implementation plan: `docs/context/readme-automation-implementation.md`
- Research findings: `docs/research/2026-02-07-readme-consistency-research.md`
- Action plan: `docs/project/readme-consistency-action-plan.md`

---

**Estimated time:** 4-6 hours
**Priority:** Medium (works fine manually for now, but prevents future drift)
**Status:** Ready for implementation

When complete, we'll have a professional, scalable documentation system that guarantees consistency!
